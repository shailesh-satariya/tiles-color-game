(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertNumberedArrayToGrid=t.convertGridToNumberedArray=t.getTile=t.getNeighbours=t.getNeighboursPositions=t.isTraversed=t.getColors=t.getRandomColor=t.traverse=t.createGrid=t.getRandomInteger=t.cloneGrid=t.AllColors=void 0;var n=r(15),a=Object.values(n.TileColor).filter((function(e){return!isNaN(e)}));t.AllColors=a;t.getRandomInteger=function(e,t){return Math.floor(Math.random()*(t-e)+e)};t.getColors=function(e){return a.slice(0,Math.max(3,Math.min(a.length,e)))};t.getRandomColor=function(e){return e[Math.floor(Math.random()*e.length)]};t.createGrid=function(e,t,r){var n=Array.from({length:e}).map((function(){return Array.from({length:t}).map((function(){return{color:r[Math.floor(Math.random()*r.length)],traversed:!1}}))}));return i(n,n[0][0].color)};var o=function(e){return e.map((function(e){return e.map((function(e){return{color:e.color,traversed:e.traversed}}))}))};t.cloneGrid=o;var s=function(e,t,r){return e[t]&&e[t][r]?e[t][r]:null};t.getTile=s;var c=function(e,t){return[{x:e-1,y:t},{x:e,y:t+1},{x:e+1,y:t},{x:e,y:t-1}]};t.getNeighboursPositions=c;t.getNeighbours=function(e,t,r){return c(t,r).reduce((function(t,r){var n=s(e,r.x,r.y);return n&&t.push(n),t}),[])};var i=function(e,t){var r=o(e),n={},a=function(r,a){var o=r+"-"+a;if(!n[o]){n[o]=!0;var c=s(e,r,a);c&&c.color===t!==c.traversed&&i(r,a)}},i=function(e,n){var o=s(r,e,n);if(o){o.color===t&&(o.traversed=!0),o.traversed&&(o.color=t);for(var i=0,l=c(e,n);i<l.length;i++){var u=l[i];a(u.x,u.y)}}};return a(0,0),r};t.traverse=i;t.isTraversed=function(e){for(var t=0,r=e;t<r.length;t++)for(var n=0,a=r[t];n<a.length;n++){if(!a[n].traversed)return!1}return!0};t.convertGridToNumberedArray=function(e){return e.map((function(e){return e.map((function(e){return e.color}))}))};t.convertNumberedArrayToGrid=function(e){var t=e.map((function(e){return e.map((function(e){return{color:e,traversed:!1}}))}));return i(t,t[0][0].color)}},15:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileColor=t.GameState=void 0,function(e){e.NOT_STARTED="NOT_STARTED",e.IN_PROGRESS="IN_PROGRESS",e.AUTO_SOLVE="AUTO_SOLVE",e.SOLVED="SOLVED",e.AUTO_SOLVED="AUTO_SOLVED"}(t.GameState||(t.GameState={})),function(e){e[e.COLOR1=1]="COLOR1",e[e.COLOR2=2]="COLOR2",e[e.COLOR3=3]="COLOR3",e[e.COLOR4=4]="COLOR4",e[e.COLOR5=5]="COLOR5",e[e.COLOR6=6]="COLOR6",e[e.COLOR7=7]="COLOR7",e[e.COLOR8=8]="COLOR8"}(t.TileColor||(t.TileColor={}))},2:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(41),t),a(r(15),t)},41:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(42),t),a(r(14),t)},42:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHeuristicColor=t.getHeuristic=t.solveNextMove=t.solveGame=void 0;var n=r(14),a=function(e){return e.reduce((function(e,t){return e+t.reduce((function(e,t){return e+(t.traversed?0:1)}),0)}),0)};t.getHeuristic=a;var o=function(e,t){return e.reduce((function(e,r){return e+r.reduce((function(e,r){return e+(r.traversed||r.color!==t?0:1)}),0)}),0)};t.getHeuristicColor=o;t.solveGame=function(e){for(var t=[],r=e;!n.isTraversed(r);){var a=s(r);if(null===a)break;t.push(a),r=n.traverse(r,a)}return t};var s=function(e){var t,r,s,c=null,i=new Set;for(t=0;t<e.length;t++)for(r=0;r<e[t].length;r++){if(e[t][r].traversed)for(var l=0,u=n.getNeighbours(e,t,r);l<u.length;l++){var d=u[l];d.traversed||i.add(d.color)}}var m=Number.MAX_SAFE_INTEGER,v=Array.from(i.values());v.sort((function(e,t){return n.AllColors.indexOf(e)-n.AllColors.indexOf(t)}));for(var b=0,f=v;b<f.length;b++){s=f[b];var j=n.traverse(e,s);if(0===o(j,s))return s;var O=a(j);if(0===O)return s;O<m&&(c=s,m=O)}return c};t.solveNextMove=s},43:function(e,t,r){},61:function(e,t,r){},62:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),o=r.n(a),s=r(8),c=r.n(s),i=r(4),l=r(2),u=(r(43),r(13),"NEW_GAME"),d="ADD_MOVE",m="SOLVED",v="AUTO_SOLVE",b="AUTO_SOLVED",f="SOLVE_NEXT_MOVE",j="SOLVE_GAME",O="SERVER_ERROR",h="NO_SERVER_ERROR",g=function(e){return function(t,r){var n=r(),a=n.grid,o=n.gameState,s=a?Object(l.traverse)(a,e):null;t({type:d,payload:{color:e,grid:s}}),s&&Object(l.isTraversed)(s)&&t({type:o===l.GameState.AUTO_SOLVE?b:m,payload:s})}},x=function(e,t){var r=t(),n=r.grid,a=r.nextMove;if(null===n||null!==a)return new Promise((function(e){}));var o=function(t){t&&e({type:f,payload:{color:t}})},s=n?Object(l.solveNextMove)(n):null;return new Promise((function(e){return o(s)}))},p=function(e,t){var r=t(),n=r.grid,a=r.aiMoves;if(null===n)return new Promise((function(e){}));var o=function(t){if(null!==t&&t.length){e({type:v});var r=0,n=setInterval((function(){var a=t[r];++r>=t.length&&clearInterval(n),e(g(a))}),1e3)}},s=n&&!a?Object(l.solveGame)(n):null;return new Promise((function(){return o(s)}))},y=function(e,t){var r=t(),n=r.initialGrid,a=r.aiMoves;if(null===n||null!==a)return new Promise((function(e){}));var o=function(t){t&&t.length&&e({type:j,payload:{colors:t}})},s=Object(l.solveGame)(n);return new Promise((function(){return o(s)}))},S=Object(i.b)((function(e){return{grid:e.grid,colors:e.colors,nextMove:e.nextMove,gameState:e.gameState}}),{addMove:g})((function(e){var t=e.grid,r=e.colors,a=e.gameState,s=e.nextMove,c=e.addMove,i=t&&t.length&&t[0].length?t[0][0].color:null;return Object(n.jsx)("div",{"data-test":"component-color-picker",className:"mt-1",children:r.map((function(e,t){return Object(n.jsx)(o.a.Fragment,{children:Object(n.jsx)("button",{"data-test":"color-picker",className:"color-picker-button color".concat(e)+(s===e?" next-move":""),disabled:a!==l.GameState.IN_PROGRESS||e===i,onClick:function(){return c(e)}})},t)}))})})),N=function(e){var t=e.grid,r={gridTemplateRows:"repeat(".concat(t.length,", 1fr)"),gridTemplateColumns:"repeat(".concat(t[0].length,", 1fr)")};return Object(n.jsx)("div",{className:"game-grid-container",children:Object(n.jsx)("div",{className:"game-grid-wrapper",children:Object(n.jsx)("div",{"data-test":"component-game-grid",className:"game-grid",style:r,children:t.map((function(e,t){return e.map((function(e,r){return Object(n.jsx)("div",{"data-test":"grid-tile",className:"grid-tile color".concat(e.color," ")+(e.traversed?"traversed":"untraversed")},"".concat(t,"-").concat(r))}))}))})})})},C=function(e){var t=e.grid,r=e.moves,a=t,s=r.map((function(e){var t=Object(l.traverse)(a,e);return a=t,t}));return Object(n.jsxs)("div",{"data-test":"component-game-history",className:"text-center",children:[Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)(N,{"data-test":"history-grid",grid:t})}),s.map((function(e,t){return Object(n.jsxs)(o.a.Fragment,{children:[Object(n.jsx)("button",{"data-test":"history-tile",className:"color".concat(e[0][0].color," color-picker-button mb-3")}),Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)(N,{"data-test":"history-grid",grid:e})})]},t)}))]})},R=r(6),E={rows:6,minRows:3,maxRows:12,columns:6,minColumns:3,maxColumns:12,colorsCnt:4,minColorsCnt:3,maxColorsCnt:8},w=function(e){var t=e.min,r=e.max,a=e.value,s=e.label,c=e.onChange,i=o.a.useState([]),l=Object(R.a)(i,2),u=l[0],d=l[1];return o.a.useEffect((function(){var e=Array.from({length:Math.max(0,r-t+1)},(function(e,r){return r+t}));d(e)}),[t,r]),Object(n.jsxs)("div",{"data-test":"component-min-max-select",className:"form-group",children:[Object(n.jsx)("label",{"data-test":"select-label",children:s}),Object(n.jsx)("select",{"data-test":"select-element",value:a,className:"form-control",onChange:function(e){return c(parseInt(e.target.value))},children:u.map((function(e){return Object(n.jsx)("option",{value:e,"data-test":"select-option",children:e},e)}))})]})},G=Object(i.b)((function(e){return{initialGrid:e.initialGrid,colors:e.colors,gameState:e.gameState,moves:e.moves}}),{newGame:function(e,t){return function(r){r({type:u,payload:{grid:e,colors:t}}),Object(l.isTraversed)(e)&&r({type:m,payload:e})}},solveNextMove:function(){return x},autoSolve:function(){return p}})((function(e){var t=e.newGame,r=e.solveNextMove,a=e.autoSolve,s=e.initialGrid,c=e.colors,i=e.moves,u=e.gameState,d=E.rows,m=E.minRows,v=E.maxRows,b=E.columns,f=E.minColumns,j=E.maxColumns,O=E.colorsCnt,h=E.minColorsCnt,g=E.maxColorsCnt,x=o.a.useState(d),p=Object(R.a)(x,2),y=p[0],S=p[1],N=o.a.useState(b),C=Object(R.a)(N,2),G=C[0],_=C[1],T=o.a.useState(O),M=Object(R.a)(T,2),A=M[0],L=M[1],P=o.a.useState(!1),V=Object(R.a)(P,2),k=V[0],D=V[1],I=u===l.GameState.AUTO_SOLVE;return Object(n.jsxs)("nav",{"data-test":"component-header-inputs",className:"navbar d-block navbar-expand-lg navbar-light bg-light",children:[Object(n.jsxs)("div",{className:"d-flex w-100",children:[Object(n.jsx)("span",{className:"navbar-brand flex-1",children:"Tiles Color Game"}),Object(n.jsx)("button",{className:"navbar-toggler"+(k?" collapsed":""),type:"button","data-test":"navbar-collapse-btn","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":k,"aria-label":"Toggle navigation",onClick:function(){return D(!k)},children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})})]}),Object(n.jsx)("div",{className:"collapse navbar-collapse"+(k?"":" show"),id:"navbarSupportedContent",children:Object(n.jsxs)("div",{className:"form-row w-100 align-items-end",children:[Object(n.jsx)("div",{className:"col-md-2",children:Object(n.jsx)(w,{"data-test":"header-inputs-rows",min:m,max:v,value:y,label:"Rows",onChange:S})}),Object(n.jsx)("div",{className:"col-md-2",children:Object(n.jsx)(w,{"data-test":"header-inputs-columns",min:f,max:j,value:G,label:"Columns",onChange:_})}),Object(n.jsx)("div",{className:"col-md-2",children:Object(n.jsx)(w,{"data-test":"header-inputs-colors",min:h,max:g,value:A,label:"Colors",onChange:L})}),Object(n.jsxs)("div",{className:"col-md-6",children:[Object(n.jsx)("button",{"data-test":"new-game-button",type:"button",className:"btn btn-primary m-1 mb-3",onClick:function(){return function(){var e=Object(l.getColors)(A),r=Object(l.createGrid)(y,G,e);t(r,e)}()},disabled:I,children:"New game"}),Object(n.jsx)("button",{"data-test":"restart-game-button",type:"button",className:"btn btn-primary m-1 mb-3",onClick:function(){s&&t(s,c)},disabled:I||u===l.GameState.NOT_STARTED||!i.length,children:"Restart game"}),Object(n.jsx)("button",{"data-test":"solve-next-move-button",type:"button",className:"btn btn-primary m-1 mb-3",onClick:function(){return r()},disabled:I||u!==l.GameState.IN_PROGRESS,children:"Solve next move"}),Object(n.jsx)("button",{"data-test":"solve-game-button",type:"button",className:"btn btn-primary m-1 mb-3",onClick:function(){return a()},disabled:I||u!==l.GameState.IN_PROGRESS,children:"Solve game"})]})]})})]})})),_=function(e){var t=e.header,r=e.body,a=e.onClose;return Object(n.jsxs)("div",{"data-test":"component-toast-message",className:"toast show fade bg-danger text-white",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{position:"fixed",right:"5px",bottom:"5px",minWidth:"200px",zIndex:1},children:[Object(n.jsxs)("div",{className:"toast-header bg-danger text-white",children:[Object(n.jsx)("strong",{"data-test":"toast-header",className:"mr-auto",children:t}),Object(n.jsx)("button",{"data-test":"toast-close-button",type:"button",className:"ml-2 mb-1 close text-white","data-dismiss":"toast","aria-label":"Close",onClick:function(){return a()},children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{"data-test":"toast-body",className:"toast-body",children:r})]})},T=Object(i.b)((function(e){return{initialGrid:e.initialGrid,grid:e.grid,gameState:e.gameState,moves:e.moves,aiMoves:e.aiMoves}}),{solveGame:function(){return y}})((function(e){var t=e.initialGrid,r=e.grid,s=e.gameState,c=e.moves,i=e.aiMoves,u=e.solveGame,d=Object(a.useRef)(null),m=Object(a.useRef)(null),v=s===l.GameState.SOLVED;return o.a.useEffect((function(){setTimeout((function(){d.current&&v&&d.current.scrollIntoView({behavior:"smooth"}),m.current&&i&&m.current.scrollIntoView({behavior:"smooth"})}))}),[v,i]),r?Object(n.jsxs)("div",{"data-test":"component-game",className:"game",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-lg-8 d-flex justify-content-center main-game-board",children:Object(n.jsx)(N,{"data-test":"game-grid",grid:r})}),Object(n.jsxs)("div",{className:"col-lg-4 d-flex flex-1 flex-column text-center justify-content-center align-self-start",children:[Object(n.jsx)(S,{"data-test":"color-picker"}),Object(n.jsxs)("h5",{className:"border-1 m-2",children:[Object(n.jsx)("b",{children:"Moves:"}),"\xa0",Object(n.jsx)("span",{"data-test":"moves-cnt",children:c.length})]})]})]}),v?Object(n.jsxs)("div",{ref:d,className:"alert alert-success text-center mb-3 mt-3",children:[Object(n.jsx)("h5",{"data-test":"success-alert",children:"Congrats! You have solved this game."}),Object(n.jsx)("button",{"data-test":"solve-game-button",className:"btn btn-primary",onClick:function(){return u()},children:"Compare with automated"})]}):null,v&&i&&t?Object(n.jsxs)("div",{ref:m,children:[Object(n.jsxs)("div",{className:"d-flex text-center",children:[Object(n.jsx)("div",{className:"flex-1",children:Object(n.jsxs)("b",{"data-test":"your-history-label",children:["Yours",Object(n.jsx)("br",{}),"(Moves: ",Object(n.jsx)("span",{"data-test":"your-history-move-count",children:c.length}),")"]})}),Object(n.jsx)("div",{className:"flex-1",children:Object(n.jsxs)("b",{"data-test":"ai-history-label",children:["Automated",Object(n.jsx)("br",{}),"(Moves: ",Object(n.jsx)("span",{"data-test":"ai-history-move-count",children:i.length}),")"]})})]}),Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("div",{className:"flex-1 p-2",children:Object(n.jsx)(C,{"data-test":"your-history",grid:t,moves:c})}),Object(n.jsx)("div",{className:"flex-1 p-2",children:Object(n.jsx)(C,{"data-test":"ai-history",grid:t,moves:i})})]})]}):null]}):null})),M=Object(i.b)((function(e){return{gameState:e.gameState,serverError:e.serverError}}),{setNoServerError:function(){return function(e){e({type:h})}}})((function(e){var t=e.gameState,r=e.serverError,a=e.setNoServerError;return Object(n.jsxs)("div",{"data-test":"component-app",children:[r?Object(n.jsx)(_,{"data-test":"toast-message",header:"Error!",body:"Server error!",onClose:a}):null,Object(n.jsx)(G,{"data-test":"header-inputs"}),t!==l.GameState.NOT_STARTED?Object(n.jsx)("div",{className:"container p-4",children:Object(n.jsx)(T,{"data-test":"game"})}):null]})})),A=(r(61),r(5)),L=r(26),P=null,V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return P;case j:return t.payload.colors;default:return e}},k=[],D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return t.payload.colors;default:return e}},I=l.GameState.NOT_STARTED,U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return l.GameState.IN_PROGRESS;case v:return l.GameState.AUTO_SOLVE;case m:return l.GameState.SOLVED;case b:return l.GameState.AUTO_SOLVED;default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:case d:return t.payload.grid;default:return e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return t.payload.grid;default:return e}},W=r(27),F=[],J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return F;case d:return[].concat(Object(W.a)(e),[t.payload.color]);default:return e}},X=null,Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:case d:case m:case b:return X;case f:return t.payload.color;default:return e}},z=!1,$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return z;case O:return!0;case h:return!1;default:return e}},q=Object(A.c)({aiMoves:V,colors:D,gameState:U,grid:B,initialGrid:H,moves:J,nextMove:Y,serverError:$}),K=[L.a],Q=A.a.apply(void 0,K)(A.d)(q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(i.a,{store:Q,children:Object(n.jsx)(M,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.4dbf4f64.chunk.js.map